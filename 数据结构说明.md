# é€€å›žåŒ…è£¹ç®¡ç†ç³»ç»Ÿ - æ•°æ®ç»“æž„è¯´æ˜Ž

## æ–°ç‰ˆæ•°æ®ç»“æž„ï¼ˆå·²ä¼˜åŒ–ï¼‰

### æ ¸å¿ƒæ”¹è¿›

1. **çŠ¶æ€å’ŒæŒ‡ä»¤åˆ†ç¦»**
   - `packageStatus`: åŒ…è£¹çš„ç‰©ç†çŠ¶æ€ï¼ˆåœ¨åº“å†…/å¾…ä¸‹æž¶/å·²ä¸‹æž¶ï¼‰
   - `customerService`: å®¢æœä¸‹è¾¾çš„æŒ‡ä»¤ï¼ˆé‡æ´¾/é‡æ´¾æ–°é¢å•/é€€å›žå®¢æˆ·ï¼‰

2. **å®Œæ•´çš„æ—¶é—´è®°å½•**
   - `shelvingTime`: ä¸Šæž¶æ—¶é—´
   - `unshelvingTime`: ä¸‹æž¶æ—¶é—´
   - `instructionTime`: ä¸‹è¾¾æŒ‡ä»¤æ—¶é—´

3. **æ•°æ®ä¸åˆ é™¤**
   - ä¸‹æž¶åŽæ ‡è®°ä¸º"å·²ä¸‹æž¶"çŠ¶æ€ï¼Œä¿ç•™åœ¨æ•°æ®åº“ä¸­
   - å¯åœ¨ä¸­å¿ƒé€€å›žç®¡ç†ä¸­æŸ¥çœ‹åŽ†å²è®°å½•
   - éœ€è¦åˆ é™¤æ—¶ï¼Œé€šè¿‡"ç®¡ç†"æŒ‰é’®æ‰‹åŠ¨åˆ é™¤

---

## åŒ…è£¹æ•°æ®å­—æ®µè¯´æ˜Ž

```javascript
{
  // åŸºç¡€ä¿¡æ¯
  "id": 1697123456789,              // å”¯ä¸€ID
  "packageNumber": "PKG001",         // è¿å•å·
  "location": "A-01",                // åº“ä½å·
  
  // çŠ¶æ€ä¿¡æ¯ï¼ˆåˆ†ç¦»çš„ä¸¤ä¸ªç»´åº¦ï¼‰
  "packageStatus": "in-warehouse",   // åŒ…è£¹çŠ¶æ€
  "customerService": "re-dispatch",  // å®¢æœæŒ‡ä»¤
  
  // æ—¶é—´è®°å½•
  "shelvingTime": "2025-10-15T08:30:00.000Z",
  "shelvingTimeDisplay": "2025/10/15 16:30:00",
  "unshelvingTime": "2025-10-15T10:30:00.000Z",
  "unshelvingTimeDisplay": "2025/10/15 18:30:00",
  "instructionTime": "2025-10-15T09:00:00.000Z",
  "instructionTimeDisplay": "2025/10/15 17:00:00",
  
  // åŽ†å²è®°å½•
  "statusHistory": [
    {
      "action": "instruction",         // æ“ä½œç±»åž‹
      "customerService": "re-dispatch", // æŒ‡ä»¤å†…å®¹
      "changedAt": "2025-10-15T09:00:00.000Z",
      "changedAtDisplay": "2025/10/15 17:00:00"
    },
    {
      "action": "unshelving",          // ä¸‹æž¶æ“ä½œ
      "packageStatus": "removed",
      "changedAt": "2025-10-15T10:30:00.000Z",
      "changedAtDisplay": "2025/10/15 18:30:00"
    }
  ]
}
```

---

## çŠ¶æ€å€¼è¯´æ˜Ž

### packageStatusï¼ˆåŒ…è£¹çŠ¶æ€ï¼‰

| å€¼ | ä¸­æ–‡åç§° | è¯´æ˜Ž | é¢œè‰² |
|---|---------|------|------|
| `in-warehouse` | åœ¨åº“å†… | åŒ…è£¹å·²ä¸Šæž¶ï¼Œåœ¨ä»“åº“ä¸­ | ðŸŸ¢ ç»¿è‰² |
| `pending-removal` | å¾…ä¸‹æž¶ | å·²ä¸‹è¾¾å®¢æœæŒ‡ä»¤ï¼Œç­‰å¾…ä¸‹æž¶ | ðŸŸ  æ©™è‰² |
| `removed` | å·²ä¸‹æž¶ | å·²å®Œæˆä¸‹æž¶æ“ä½œ | âš« ç°è‰² |

### customerServiceï¼ˆå®¢æœæŒ‡ä»¤ï¼‰

| å€¼ | ä¸­æ–‡åç§° | è¯´æ˜Ž | é¢œè‰² |
|---|---------|------|------|
| `re-dispatch` | é‡æ´¾ | é‡æ–°æ´¾é€ | ðŸŸ£ ç´«è‰² |
| `re-dispatch-new-label` | é‡æ´¾ï¼ˆæ–°é¢å•ï¼‰ | ä½¿ç”¨æ–°é¢å•é‡æ–°æ´¾é€ | ðŸŸª æ·±ç´«è‰² |
| `return-to-customer` | é€€å›žå®¢æˆ· | é€€å›žç»™å®¢æˆ· | ðŸ”´ çº¢è‰² |
| `null` | - | æœªä¸‹è¾¾æŒ‡ä»¤ | - |

---

## å·¥ä½œæµç¨‹

### 1. ä¸Šæž¶æµç¨‹
```
[ä¸Šæž¶] â†’ packageStatus: in-warehouse
       â†’ shelvingTime: è®°å½•æ—¶é—´
       â†’ customerService: null
```

### 2. ä¸‹è¾¾æŒ‡ä»¤æµç¨‹
```
[ä¸­å¿ƒé€€å›žç®¡ç† - é€‰æ‹©è¿å• - æŒ‡ä»¤ä¸‹è¾¾]
â†’ packageStatus: pending-removal (è‡ªåŠ¨æ›´æ–°)
â†’ customerService: 're-dispatch' | 're-dispatch-new-label' | 'return-to-customer'
â†’ instructionTime: è®°å½•æ—¶é—´
```

### 3. ä¸‹æž¶æµç¨‹
```
[ä¸‹æž¶ - æ‰«æè¿å•å· - ç¡®è®¤ä¸‹æž¶]
â†’ packageStatus: removed
â†’ unshelvingTime: è®°å½•æ—¶é—´
â†’ customerService: ä¿æŒä¸å˜
```

### 4. åˆ é™¤æµç¨‹ï¼ˆå¯é€‰ï¼‰
```
[ä¸­å¿ƒé€€å›žç®¡ç† - ç®¡ç† - åˆ é™¤è¿å•]
â†’ ä»Žæ•°æ®åº“ä¸­æ°¸ä¹…åˆ é™¤
```

---

## ç­›é€‰ç»´åº¦

### ä¸­å¿ƒé€€å›žç®¡ç†

#### çŠ¶æ€ç­›é€‰
- å…¨éƒ¨
- åœ¨åº“å†… (`packageStatus === 'in-warehouse'`)
- å¾…ä¸‹æž¶ (`packageStatus === 'pending-removal'`)
- å·²ä¸‹æž¶ (`packageStatus === 'removed'`)

#### å®¢æœæŒ‡ä»¤ç­›é€‰
- é‡æ´¾ (`customerService === 're-dispatch'`)
- é‡æ´¾ï¼ˆæ–°é¢å•ï¼‰ (`customerService === 're-dispatch-new-label'`)
- é€€å›žå®¢æˆ· (`customerService === 'return-to-customer'`)

#### æ—¶é—´ç­›é€‰
- ä¸Šæž¶æ—¶é—´èŒƒå›´
- ä¸‹æž¶æ—¶é—´èŒƒå›´
- ä¸‹è¾¾æŒ‡ä»¤æ—¶é—´èŒƒå›´

### ä¸‹æž¶æ¨¡å—

åªæ˜¾ç¤ºï¼š`packageStatus === 'pending-removal'` çš„è¿å•

---

## æ•°æ®è¿ç§»

### ä»Žæ—§ç‰ˆæ•°æ®ç»“æž„è¿ç§»

å¦‚æžœç³»ç»Ÿä¸­æœ‰æ—§ç‰ˆæ•°æ®ï¼ˆä½¿ç”¨ `status` å­—æ®µï¼‰ï¼Œä¼šè‡ªåŠ¨è½¬æ¢ï¼š

```javascript
// æ—§æ•°æ®
{
  "status": "in-stock"
}

// è‡ªåŠ¨è½¬æ¢ä¸º
{
  "packageStatus": "in-warehouse",
  "customerService": null
}
```

è½¬æ¢è§„åˆ™ï¼š
- `status: 'in-stock'` â†’ `packageStatus: 'in-warehouse'`
- å…¶ä»–æ—§çŠ¶æ€ â†’ `packageStatus: 'in-warehouse'`ï¼ˆé»˜è®¤å€¼ï¼‰
- `customerService` â†’ `null`ï¼ˆé»˜è®¤å€¼ï¼‰

---

## æœ€ä½³å®žè·µ

1. **ä¸è¦ç›´æŽ¥åˆ é™¤æ•°æ®**
   - ä¸‹æž¶åŽçš„æ•°æ®ä¿ç•™ä¸º"å·²ä¸‹æž¶"çŠ¶æ€
   - ä¾¿äºŽåŽ†å²æŸ¥è¯¢å’Œç»Ÿè®¡åˆ†æž

2. **å®Œæ•´çš„æ—¶é—´è®°å½•**
   - ä¸‰ä¸ªæ—¶é—´ç»´åº¦å®Œæ•´è®°å½•æ“ä½œåŽ†å²
   - æ”¯æŒæŒ‰æ—¶é—´ç­›é€‰å’ŒæŠ¥è¡¨ç»Ÿè®¡

3. **çŠ¶æ€å’ŒæŒ‡ä»¤åˆ†ç¦»**
   - ç‰©ç†çŠ¶æ€ï¼ˆåœ¨åº“/å¾…ä¸‹æž¶/å·²ä¸‹æž¶ï¼‰
   - ä¸šåŠ¡æŒ‡ä»¤ï¼ˆé‡æ´¾/é€€å›žç­‰ï¼‰
   - æ¸…æ™°çš„æ•°æ®ç»“æž„ï¼Œä¾¿äºŽæ‰©å±•

4. **åŽ†å²è®°å½•**
   - `statusHistory` è®°å½•æ‰€æœ‰æ“ä½œ
   - ä¾¿äºŽè¿½æº¯å’Œå®¡è®¡

---

## è¡¨æ ¼å±•ç¤º

ä¸­å¿ƒé€€å›žç®¡ç†è¡¨æ ¼åˆ—ï¼š

| åˆ—å | æ•°æ®æº | è¯´æ˜Ž |
|-----|-------|------|
| è¿å•å· | `packageNumber` | å”¯ä¸€æ ‡è¯† |
| åº“ä½ | `location` | æ‰€åœ¨åº“ä½ |
| çŠ¶æ€ | `packageStatus` | åŒ…è£¹ç‰©ç†çŠ¶æ€ |
| å®¢æœæŒ‡ä»¤ | `customerService` | ä¸šåŠ¡æŒ‡ä»¤ |
| ä¸Šæž¶æ—¶é—´ | `shelvingTimeDisplay` | ä¸Šæž¶æ“ä½œæ—¶é—´ |
| ä¸‹æž¶æ—¶é—´ | `unshelvingTimeDisplay` | ä¸‹æž¶æ“ä½œæ—¶é—´ |
| ä¸‹è¾¾æŒ‡ä»¤æ—¶é—´ | `instructionTimeDisplay` | æŒ‡ä»¤ä¸‹è¾¾æ—¶é—´ |
| æ“ä½œ | - | ç®¡ç†æŒ‰é’® |

---

## ç¤ºä¾‹åœºæ™¯

### åœºæ™¯1ï¼šæ­£å¸¸é‡æ´¾æµç¨‹

1. ä¸Šæž¶ï¼š`packageStatus: 'in-warehouse'`, `customerService: null`
2. ä¸‹è¾¾é‡æ´¾æŒ‡ä»¤ï¼š`packageStatus: 'pending-removal'`, `customerService: 're-dispatch'`
3. ä¸‹æž¶ï¼š`packageStatus: 'removed'`, `customerService: 're-dispatch'`

### åœºæ™¯2ï¼šé€€å›žå®¢æˆ·æµç¨‹

1. ä¸Šæž¶ï¼š`packageStatus: 'in-warehouse'`, `customerService: null`
2. ä¸‹è¾¾é€€å›žæŒ‡ä»¤ï¼š`packageStatus: 'pending-removal'`, `customerService: 'return-to-customer'`
3. ä¸‹æž¶ï¼š`packageStatus: 'removed'`, `customerService: 'return-to-customer'`

---

## æŠ€æœ¯å®žçŽ°

### LocalStorage å­˜å‚¨

- Key: `packages`
- Value: JSONå­—ç¬¦ä¸²ï¼ˆæ•°ç»„ï¼‰
- æ¯æ¬¡æ“ä½œåŽç«‹å³ä¿å­˜

### æ•°æ®æŸ¥è¯¢ä¼˜åŒ–

ä½¿ç”¨ `filter()` æ–¹æ³•è¿›è¡Œå¤šç»´åº¦ç­›é€‰ï¼š

```javascript
// çŠ¶æ€ç­›é€‰
packages.filter(pkg => pkg.packageStatus === 'pending-removal')

// æŒ‡ä»¤ç­›é€‰
packages.filter(pkg => pkg.customerService === 're-dispatch')

// æ—¶é—´ç­›é€‰
packages.filter(pkg => {
  const time = new Date(pkg.shelvingTime).getTime()
  return time >= startTime && time <= endTime
})
```

---

æ›´æ–°æ—¶é—´ï¼š2025-10-15
ç‰ˆæœ¬ï¼š2.0




