# 🚨 数据丢失 - 快速参考卡

> **打印此页或保存到桌面，紧急时使用**

---

## 🔍 第一步：诊断（2分钟）

登录 Supabase → SQL Editor → 执行：

```sql
ALTER TABLE locations DISABLE ROW LEVEL SECURITY;
SELECT code, city FROM locations WHERE code BETWEEN 'A-10-18-2025' AND 'A-10-25-2025';
ALTER TABLE locations ENABLE ROW LEVEL SECURITY;
```

- ✅ **有数据** → 执行步骤 2A
- ❌ **无数据** → 执行步骤 2B

---

## 🔧 第二步 A：修复权限（1分钟）

```sql
UPDATE profiles
SET cities = ARRAY['MIA', 'WPB', 'FTM', 'MCO', 'TPA']
WHERE email = '替换成你的邮箱';
```

刷新前端：`Ctrl + F5`

---

## 🔧 第二步 B：恢复数据（2分钟）

```sql
INSERT INTO locations (code, city, created_at)
VALUES
  ('A-10-18-2025', 'MIA', '2025-10-18 00:00:00+00'),
  ('A-10-19-2025', 'MIA', '2025-10-19 00:00:00+00'),
  ('A-10-20-2025', 'MIA', '2025-10-20 00:00:00+00'),
  ('A-10-21-2025', 'MIA', '2025-10-21 00:00:00+00'),
  ('A-10-22-2025', 'MIA', '2025-10-22 00:00:00+00'),
  ('A-10-23-2025', 'MIA', '2025-10-23 00:00:00+00'),
  ('A-10-24-2025', 'MIA', '2025-10-24 00:00:00+00'),
  ('A-10-25-2025', 'MIA', '2025-10-25 00:00:00+00')
ON CONFLICT DO NOTHING;
```

刷新前端：`Ctrl + F5`

---

## 🛡️ 第三步：启用审计（可选，2分钟）

执行完整脚本：`database/恢复丢失的库位.sql`

---

## 📞 需要帮助？

查看详细文档：
- `docs/快速修复-数据丢失.md`（5分钟解决）
- `docs/数据丢失问题-解决方案.md`（完整方案）

联系：neo4444l.zhang@gmail.com

---

**Supabase 登录：** https://supabase.com  
**SQL Editor 路径：** 左侧菜单 → SQL Editor → New query

