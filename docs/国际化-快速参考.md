# 国际化（i18n）快速参考指南

## 📊 项目状态

### ✅ 已完成
1. **基础架构** (100%)
   - 中英文翻译配置文件
   - LanguageContext 和 useLanguage Hook
   - 语言持久化

2. **已翻译组件** (40%)
   - ✅ Login.jsx
   - ✅ ResetPassword.jsx
   - ✅ App.jsx
   - ✅ HomePage.jsx

### 🔄 进行中
3. **剩余组件** (60%)
   - ⏳ UserManagement.jsx（大文件，正在处理）
   - ⏳ CenterReturnManagement.jsx
   - ⏳ LocationManagement.jsx
   - ⏳ ReturnDashboard.jsx
   - ⏳ ShelvingPage.jsx
   - ⏳ ShelvingInput.jsx
   - ⏳ UnshelvingPage.jsx

## 🚀 快速开始

### 1. 在组件中使用

```javascript
import { useLanguage } from '../contexts/LanguageContext'

function MyComponent() {
  const { t } = useLanguage()
  
  return <h1>{t('app.title')}</h1>
}
```

### 2. 常用翻译键

#### 通用
```javascript
t('common.confirm')      // 确认 / Confirm
t('common.cancel')       // 取消 / Cancel
t('common.save')         // 保存 / Save
t('common.delete')       // 删除 / Delete
t('common.loading')      // 加载中... / Loading...
t('common.back')         // 返回 / Back
```

#### 认证
```javascript
t('auth.login')          // 登录 / Login
t('auth.logout')         // 退出登录 / Logout
t('auth.email')          // 邮箱 / Email
t('auth.password')       // 密码 / Password
```

#### 角色
```javascript
t('roles.admin')         // 管理员 / Admin
t('roles.manager')       // 经理 / Manager
t('roles.user')          // 普通用户 / User
```

#### 用户管理
```javascript
t('userManagement.title')              // 用户管理 / User Management
t('userManagement.createUser')         // 创建新用户 / Create New User
t('userManagement.username')           // 用户名 / Username
t('userManagement.status')             // 状态 / Status
t('userManagement.actions')            // 操作 / Actions
```

#### 首页
```javascript
t('home.shelving')       // 上架 / Shelving
t('home.unshelving')     // 下架 / Unshelving
t('home.returnDashboard') // 退件看板 / Return Dashboard
```

## 📝 翻译替换模式

### 模式 1: 简单文本替换
```javascript
// 之前
<h1>用户管理</h1>

// 之后  
<h1>{t('userManagement.title')}</h1>
```

### 模式 2: 按钮文本
```javascript
// 之前
<button>确认</button>

// 之后
<button>{t('common.confirm')}</button>
```

### 模式 3: 占位符
```javascript
// 之前
placeholder="请输入邮箱"

// 之后
placeholder={t('auth.enterEmail')}
```

### 模式 4: 条件渲染
```javascript
// 之前
{loading ? '加载中...' : '提交'}

// 之后
{loading ? t('common.loading') : t('common.submit')}
```

### 模式 5: 状态映射
```javascript
// 之前
const statusMap = {
  'in-warehouse': '在库内',
  'pending-removal': '待下架'
}

// 之后
const getStatusText = (status) => t(`packageStatus.${status}`)
```

## 🔧 剩余组件翻译要点

### UserManagement.jsx
需要翻译的主要区域：
1. 错误消息和通知
2. 确认对话框文本
3. 表格标题
4. 按钮文本
5. 模态框内容

关键行数（需要特别注意）:
- 65: 错误消息
- 94: 权限降级警告
- 115: 成功消息
- 169: 删除确认对话框
- 360-378: 页面标题区域
- 418-429: 表格标题
- 518-568: 编辑模态框
- 570-645: 创建用户模态框

### CenterReturnManagement.jsx  
需要翻译：
- 搜索和筛选UI
- 标签页名称
- 表格列标题
- 操作按钮
- 模态框

### LocationManagement.jsx
需要翻译：
- 页面标题
- 添加/删除操作
- 表格内容
- 确认对话框

### 其他页面
- ReturnDashboard.jsx: 统计卡片、导航按钮
- ShelvingPage.jsx: 库位选择界面
- ShelvingInput.jsx: 扫描输入界面
- UnshelvingPage.jsx: 下架扫描界面

## 📦 完整翻译配置

所有翻译键已在以下文件中定义：
- `src/locales/zh.js` - 中文
- `src/locales/en.js` - 英文

包含以下类别：
- common (通用)
- auth (认证)
- roles (角色)
- userManagement (用户管理)
- home (首页)
- shelving (上架)
- unshelving (下架)
- dashboard (看板)
- locationManagement (库位管理)
- centerReturn (中心退回)
- packageStatus (包裹状态)
- customerService (客服指令)
- messages (系统消息)
- app (应用)

## 🎨 语言切换UI

### 登录页面样式（已实现）
```jsx
<div className="language-switcher">
  <button className={`lang-btn ${language === 'zh' ? 'active' : ''}`}
    onClick={() => changeLanguage('zh')}>
    中文
  </button>
  <button className={`lang-btn ${language === 'en' ? 'active' : ''}`}
    onClick={() => changeLanguage('en')}>
    English
  </button>
</div>
```

CSS已在 `Login.css` 中定义。

## ⚡ 高效翻译技巧

### 1. 查找所有中文文本
```bash
# 使用grep查找包含中文的行
grep -r "[\u4e00-\u9fa5]" src/pages/*.jsx
```

### 2. 批量替换模式
常见的中文文本替换：
- `'确认'` → `{t('common.confirm')}`
- `'取消'` → `{t('common.cancel')}`
- `'保存'` → `{t('common.save')}`
- `'删除'` → `{t('common.delete')}`
- `'加载中...'` → `{t('common.loading')}`

### 3. 验证翻译键存在
确保使用的翻译键在 `zh.js` 和 `en.js` 中都有定义。

## 🐛 常见问题

### Q: 翻译键显示为原始键名
**A:** 检查翻译键是否在 `zh.js` 和 `en.js` 中正确定义

### Q: 切换语言后部分文本未更新
**A:** 确保组件使用了 `useLanguage` Hook 并调用了 `t()` 函数

### Q: 控制台显示警告
**A:** 检查是否所有需要翻译的文本都使用了 `t()` 函数包裹

## 📈 进度追踪

**当前进度**: 40% (4/11 组件完成)

**预计剩余时间**: 
- UserManagement: 30分钟（复杂度高）
- CenterReturnManagement: 30分钟（复杂度高）
- 其他5个组件: 每个10-15分钟

**总预计**: 约2小时完成所有翻译

---

**最后更新**: 2025-10-18
**文档版本**: v1.0

